(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[6],{244:function(e,t,a){e.exports=a.p+"static/media/user.c0697d5d.svg"},310:function(e,t,a){var r={"./ambulance.svg":444,"./delivery.svg":445,"./fire.svg":446,"./food.svg":447,"./fund.svg":448,"./helpline.svg":449,"./homes.svg":450,"./hospital.svg":451,"./icon.svg":452,"./kitchen.svg":453,"./lab.svg":454,"./mental-health.svg":455,"./null.svg":456,"./other.svg":457,"./police.svg":458,"./quarantine.svg":459,"./seniors.svg":460,"./thali.svg":461,"./transport.svg":462,"./unknown.svg":463,"./user.svg":244};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=310},444:function(e,t,a){e.exports=a.p+"static/media/ambulance.4ce9786b.svg"},445:function(e,t,a){e.exports=a.p+"static/media/delivery.166a768b.svg"},446:function(e,t,a){e.exports=a.p+"static/media/fire.d2b09926.svg"},447:function(e,t,a){e.exports=a.p+"static/media/food.a50b1884.svg"},448:function(e,t,a){e.exports=a.p+"static/media/fund.89e35ddb.svg"},449:function(e,t,a){e.exports=a.p+"static/media/helpline.d2d04866.svg"},450:function(e,t,a){e.exports=a.p+"static/media/homes.5d26365e.svg"},451:function(e,t,a){e.exports=a.p+"static/media/hospital.ee786d76.svg"},452:function(e,t,a){e.exports=a.p+"static/media/icon.b81318db.svg"},453:function(e,t,a){e.exports=a.p+"static/media/kitchen.5e0b972b.svg"},454:function(e,t,a){e.exports=a.p+"static/media/lab.1ce20326.svg"},455:function(e,t,a){e.exports=a.p+"static/media/mental-health.a2cd38bf.svg"},456:function(e,t,a){e.exports=a.p+"static/media/null.3d0c5526.svg"},457:function(e,t,a){e.exports=a.p+"static/media/other.2590c4f7.svg"},458:function(e,t,a){e.exports=a.p+"static/media/police.d30a8b2b.svg"},459:function(e,t,a){e.exports=a.p+"static/media/quarantine.34caf26f.svg"},460:function(e,t,a){e.exports=a.p+"static/media/seniors.f0ae6c8f.svg"},461:function(e,t,a){e.exports=a.p+"static/media/thali.04767274.svg"},462:function(e,t,a){e.exports=a.p+"static/media/transport.17903b62.svg"},463:function(e,t,a){e.exports=a.p+"static/media/unknown.3d0c5526.svg"},494:function(e,t,a){"use strict";a.r(t);var r=a(53),n=a(33),o=a(43),i=a(49),s=a(48),c=a(0),l=a.n(c),u=a(209),p=a.n(u),d=a(434),f=a(210),m=null,g=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.leaflet.map,t=(new d.Geosearch).addTo(e),a=(new p.a.LayerGroup).addTo(e);t.on("results",(function(e){a.clearLayers(),e.results[0]&&(m(e.results[0].latlng),a.addLayer(p.a.marker(e.results[0].latlng)))}))}},{key:"render",value:function(){return m=this.props.search,null}}]),a}(c.Component),v=Object(f.d)(g),h=a(93),y=a.n(h),b=a(435),E=a(405),x=a(243),O=a(305),k=a(309),M=a(307),j=a(308),w=a(304),L=a(440),N=a.n(L),S=(a(443),x.b.BaseLayer),C=new p.a.Icon({iconUrl:a(244),iconRetinaUrl:a(244),iconSize:[40,40]}),F=function(e){return p.a.divIcon({html:e.getChildCount(),className:"marker-cluster-custom",iconSize:p.a.point(30,30,!0)})};function P(e){return e.properties.priority}function D(e){return!e.properties.priority}function I(e,t){var a=e[0]*Math.PI/180,r=t[0]*Math.PI/180,n=(t[1]-e[1])*Math.PI/180,o=6371e3*Math.acos(Math.sin(a)*Math.sin(r)+Math.cos(a)*Math.cos(r)*Math.cos(n));return Number((o/1e3).toFixed(2))}function z(e){return new p.a.Icon({iconUrl:a(310)("./"+e.layer.feature.properties.icon+".svg"),iconRetinaUrl:a(310)("./"+e.layer.feature.properties.icon+".svg"),iconSize:[25,25]})}function R(e){var t=Object(c.useState)([]),a=Object(r.a)(t,2),n=a[0],o=a[1];Object(c.useEffect)((function(){f()}),[]);var i,s,u,d,f=function(){y.a.get("https://api.covid19india.org/resources/geoResources.json").then((function(e){o(e.data)})).catch((function(e){console.log(e)}))},m=e.currentLocation||[21.3041,77.1025],g=e.currentLocation;g&&(i=new b(p.a.geoJSON(n,{filter:P})).nearestLayer([g[1],g[0]],5),s=new b(p.a.geoJSON(n,{filter:D})).nearestLayer([g[1],g[0]],50,1e5),u=null===n||void 0===n||null===(d=n.features)||void 0===d?void 0:d.filter((function(t){return"PAN India"===t.properties.state||t.properties.state.includes("PAN")&&t.properties.state.includes(e.userState)})));var h={name:"NearestK-Essentials",type:"FeatureCollection",features:[]};if(i){var L=0;for(L=0;L<i.length;L++)h.features.push({type:"Feature",geometry:{type:"Point",coordinates:i[L].layer.feature.geometry.coordinates},properties:{name:i[L].layer.feature.properties.name,desc:i[L].layer.feature.properties.desc,addr:i[L].layer.feature.properties.addr,phone:i[L].layer.feature.properties.phone,contact:i[L].layer.feature.properties.contact,dist:I(g,i[L].layer.feature.geometry.coordinates.reverse()),icon:z(i[L]),recordid:i[L].layer.feature.properties.recordid}})}if(s){var R=0;for(R=0;R<s.length;R++)h.features.push({type:"Feature",geometry:{type:"Point",coordinates:s[R].layer.feature.geometry.coordinates},properties:{name:s[R].layer.feature.properties.name,desc:s[R].layer.feature.properties.desc,addr:s[R].layer.feature.properties.addr,phone:s[R].layer.feature.properties.phone,contact:s[R].layer.feature.properties.contact,dist:I(g,s[R].layer.feature.geometry.coordinates.reverse()),icon:z(s[R]),recordid:s[R].layer.feature.properties.recordid}})}if(u){var U=0;for(U=0;U<u.length;U++)h.features.push(u[U])}return l.a.createElement("div",null,l.a.createElement(O.a,{center:m,zoom:5},l.a.createElement(x.b,{position:"topright"},l.a.createElement(S,{checked:!0,name:"Light Mode"},l.a.createElement(k.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",detectRetina:!0})),l.a.createElement(S,{name:"Dark Mode"},l.a.createElement(k.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",detectRetina:!0}))),l.a.createElement(v,{search:e.searchMap}),e.currentLocation&&l.a.createElement(M.a,{position:e.currentLocation,icon:C,key:"userLoc"},l.a.createElement(j.a,null,l.a.createElement("h2",null,"Your current location"))),l.a.createElement(w.a,null,l.a.createElement(N.a,{showCoverageOnHover:!0,maxClusterRadius:10,spiderfyDistanceMultiplier:2,iconCreateFunction:F},null===h||void 0===h?void 0:h.features.filter((function(e){return e.properties.dist})).map((function(e){return l.a.createElement(M.a,{key:e.properties.id,position:e.geometry.coordinates,icon:e.properties.icon},l.a.createElement(j.a,{className:"custom-popup"},l.a.createElement("div",null,l.a.createElement("a",{href:e.properties.contact,target:"_noblank"},l.a.createElement("h2",null,e.properties.name," ","  ",l.a.createElement(E.a,null))),l.a.createElement("p",null,l.a.createElement("b",null,"Description:")," ",e.properties.desc,l.a.createElement("br",null),l.a.createElement("b",null,"Address:")," ",e.properties.addr,e.properties.phone?l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("b",null,"Phone:")," ",e.properties.phone,l.a.createElement("br",null)," "):null,e.properties.dist," km away from your location"))))}))))))}var U=a(488);t.default=function(e){var t=Object(c.useState)(null),a=Object(r.a)(t,2),n=a[0],o=a[1],i=Object(c.useState)(null),s=Object(r.a)(i,2),u=s[0],p=s[1],d=Object(c.useState)(null),f=Object(r.a)(d,2),m=f[0],g=f[1],v=function(e,t){try{y.a.get("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude="+e+"&longitude="+t+"&localityLanguage=en").then((function(e){p(e.data.locality),g(e.data.principalSubdivision)}))}catch(a){console.log(a),p("Error fetching name of your location"),g(null)}};return l.a.createElement("div",{className:"Essentials"},l.a.createElement("div",{className:"tracker_bar"},l.a.createElement("div",{className:"button",style:{animationDelay:"0.9s"},onClick:function(){navigator.geolocation.getCurrentPosition((function(e){o([e.coords.latitude,e.coords.longitude]),v(e.coords.latitude,e.coords.longitude)}))}},u?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,u+", "+m)):l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,null),l.a.createElement("h3",null,"View nearby hospitals treating Covid-19"))),l.a.createElement("div",null,l.a.createElement(R,{searchMap:function(e){return function(e){o([e.lat,e.lng])}(e)},currentLocation:n,userState:m,className:"leaflet-container"}))))}}}]);
//# sourceMappingURL=Navigate.1dc95f5c.chunk.js.map